<!DOCTYPE html>

<html>

<head>
	
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
	<link href="https://fonts.googleapis.com/css?family=Comfortaa|Roboto+Slab&display=swap" rel="stylesheet">
	<title>Payment</title>
	<style>

		#return {

			margin:auto;
			width:175px;
			padding:10px;
			font-size:22px;
			border-radius:10px;
			margin-top:5px;

		} #copy_btn {

			padding:5px;
			border-radius:10px;

		} #copy_node {

			padding:5px;
			border-radius:10px;
			font-family:'Comfortaa', cursive;

		} #qrcode {

			width:160px;
			height:160px;
			margin-top:15px;

		} .paybtn {

			color:#212529;
			background-color:#FDB137;
			border-color:#FDB137;
			font-family:'Comfortaa', cursive;

		} .check_pmt a {

			width:200px;
			height:15px;
			border-radius:10px;
			padding:10px;
			font-family:'Comfortaa', cursive;

		} .topbar {

			position:relative;
			top: 0;
			width:100%;
			color:#F7F6EE;
			text-align:left;
			height:60.5px;
			background:#292d58;
			font-family:'Comfortaa', cursive;
			font-size:22px;
			line-height:60px;

		} .topbar a {

			float:left;
			color:#F7F6EE;
			text-align:center;
			padding:0.5px 16px;
			text-decoration:none;

		} .topbar a:hover, .dropdown:hover .dropbtn {

			background-color:#868bc6;

		} .topbar a.active {

			background-color:#FDB137;

		} #other_btn {

			font-size:16px;

		} .tooltip {

  			position: relative;
  			display: inline-block;

		} .tooltip .tooltiptext {

 			visibility: hidden;
  			width: 140px;
  			background-color: #555;
  			color: #fff;
  			text-align: center;
  			border-radius: 6px;
  			padding: 5px;
  			position: absolute;
  			z-index: 1;
  			bottom: 150%;
  			left: 50%;
  			margin-left: -75px;
  			opacity: 0;
  			transition: opacity 0.3s;

		} .tooltip .tooltiptext::after {

  			content: "";
  			position: absolute;
  			top: 100%;
  			left: 50%;
  			margin-left: -5px;
  			border-width: 5px;
  			border-style: solid;
  			border-color: #555 transparent transparent transparent;

		} .tooltip:hover .tooltiptext {

  			visibility: visible;
  			opacity: 1;

		} footer {
		
			color:#F7F6EE;
			text-align:left;
			background:#FDB137;
			font-family:'Comfortaa', cursive;
			font-size:12px;

		} footer a {

			color:#F7F6EE;

		} footer li {

			line-height:3.4;

		} .flex-container {

			display:flex;
			flex-direction:row;
			flex-wrap:wrap;

		} .flex-container > div {

			padding:15px;
			margin:2px;

		} dropdown {

			float:left;

		} .dropdown .dropbtn {

			background-color:inherit;
			font-family:inherit;
			margin:0;
			color:#F7F6EE;
			padding:0.5px 16px;
			font-size:16px;
			border:none;
			outline:none;

		} .dropdown-content {

			display:none;
			position:absolute;
			background-color:#868bc6;
			min-width:160px;
			box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
			z-index:1;

		} .dropdown-content a {
  
			float:none;
			color: #F7F6EE;
  			padding: 10px 20px;
 			text-decoration: none;
  			display: block;
			font-size:12px;
			text-align:left;

		} .dropdown-content a:hover {

			background-color: #ddd;
			color:#292d58;

		} .dropdown:hover .dropdown-content {

			display: block;

		}

	</style>
	<script type="text/javascript" src="{{ url_for('static', filename="js/jquery.min.js")}}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename="js/qrcode.js")}}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename="js/jquery.qrcode.js")}}"></script>
</head>

<body style="background-color:#F7F6EE;">
	<div id="topbar" class="topbar">	
		<a class="active" href="https://localhost:5000">obilisk.app</a>
		<a id="other_btn" href="/about">about</a>
		<div class="dropdown">
			<a class="dropbtn">resources
				<i class="fa fa-caret-down"></i>
			</a>
			<div class="dropdown-content">
				<a href="/bitcoin">Why bitcoin?</a>
				<a href="/how_to">How to use obilisk</a>
			</div>
		</div>
		<a id="other_btn" href="/shop">merch</a>
	</div>	
	<center>
		<br>
		<br>
		<br>
		<br>
		<div id="output"></div>
		<div id="paybutton">
		</div>
			<form name="invoice" action="/check" method="post" id="invoice"></form>
		<br>
		<div id="check_pmt" class="check_pmt">
		
			<a onclick="check_payment(invoice.invoice_text.value)">Check Payment</a>

		</div>
		<div id="node_key">
			
			<br>
			<p style="font-family:'Comfortaa', cursive;">Need to connect to a node?</p>
			<input readonly type="text" id="node_key_txt" name="node_key_txt" value="032b2618f7b47fc80164c7a89482ecbf24c775175367ba5617bed360977668c314@72.137.117.210:9735" style="font-family:'Comfortaa', cursive;"></input>
			<input type="button" onclick="copyNodeFunc()" id="copy_node" value="Copy Node URI"></input>

		</div>
	</center>
	<br>	
	<script type="text/javascript">

		var invoice = {{ display|tojson|safe }};
		invoice = String(invoice);
		
		var pay_btn = document.createElement("a");
		pay_btn.setAttribute('class', 'paybtn');
		pay_btn.setAttribute('href', 'lightning:'+invoice);
		pay_btn.appendChild(document.createTextNode("Pay To See Solution"));
		document.getElementById("output").appendChild(pay_btn);
		document.getElementById("output").appendChild(document.createElement('br'));
		document.getElementById("output").appendChild(document.createElement('br'));

		jQuery('#output').qrcode({
			text	: "lightning:"+invoice.toUpperCase()
		});
					
		var invoice_text = document.createElement("input");
		invoice_text.type = "text";
		invoice_text.setAttribute('readonly', true);
		invoice_text.setAttribute('id', 'invoice_text');
		invoice_text.setAttribute('name','invoice_text');
		invoice_text.value = invoice;
		document.getElementById("invoice").appendChild(invoice_text);

		var copy_btn = document.createElement("input");
		copy_btn.setAttribute('type', 'button');
		copy_btn.setAttribute('onclick', 'copyFunction()');
		copy_btn.setAttribute('id', 'copy_btn');
		copy_btn.setAttribute('value', 'Copy Invoice');
		document.getElementById("invoice").appendChild(copy_btn);

		function copyFunction() {

			var copyText = document.getElementById("invoice_text");

			copyText.select();
			document.execCommand("copy");

			var copy_btn = document.getElementById("copy_btn");
			copy_btn.setAttribute('value', 'Copied Invoice'); 

		}

		function copyNodeFunc() {

			var copyText = document.getElementById("node_key_txt");

			copyText.select();
			document.execCommand("copy");

			var copy_btn = document.getElementById("copy_node");
			copy_btn.setAttribute('value', 'Copied Node URI'); 

		}

		function check_payment(invoice) {

			
			//alert(invoice);
			document.invoice.submit();

		}

	</script>

</body>
<footer>
	<div class="flex-container">
		<div style="padding:20px 0px 10px 80px;">
			<p>obilisk,</p>
			<p>800 Steeles Ave. W #B10182<p>
			<p>Thornhill, Ontario</p>
			<p>L4J 7L2</p>
			<p>Proudly Canadian <font size="4">ðŸ‡¨ðŸ‡¦</font></p>
		</div>
		<div style="margin-left:650px;margin-top:10px;">
			<ul style="list-style:none;">
				<li>
					<a href="https://medium.com/@obilisk">
						<img src="/static/monogram_rc.png" style="width:25px;height:25px;" hspace="10">
					@obilisk</a>
				</li>
				<li>
					<a href="https://twitter.com/obiliskapp">
						<img src="/static/Twitter_Social_Icon_Circle_White.png" style="width:25px;height:25px;" hspace="10">
					@obiliskapp</a>
				</li>
				<li>
					<a href="mailto:info@obilisk.app">
						<img src="/static/email.png" style="width:25px;height:25px;" hspace="10">
					info@obilisk.app</a>
				</li>
			</ul>
		</div>
	</div>
</footer>
</html>